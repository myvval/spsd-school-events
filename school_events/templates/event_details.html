{% extends "base.html" %}

{% block title %}{{ event.name }}{% endblock %}

{% block content %}
<div class="event-details">
    <h1>{{ event.name }}</h1>
    <p class="event-date">{{ event.date.strftime('%d.%m.%Y %H:%M').replace('0', '', 1) if event.date.strftime('%H')[0] == '0' else event.date.strftime('%d.%m.%Y %H:%M') }}</p>
    <p class="event-description">{{ event.description }}</p>
    
    {% if current_user.is_authenticated %}
        {% if not current_user.registrations|selectattr('event_id', 'equalto', event.id)|list %}
            <a href="{{ url_for('register_event', event_id=event.id) }}" class="button">Register for Event</a>
        {% else %}
            <p class="registered-message">You are registered for this event!</p>
        {% endif %}
    {% else %}
        <p>Please <a href="{{ url_for('login') }}">login</a> to register for this event.</p>
    {% endif %}
</div>
{% endblock %}